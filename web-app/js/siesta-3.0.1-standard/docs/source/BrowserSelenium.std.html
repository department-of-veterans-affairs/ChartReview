<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*

Siesta 3.0.1
Copyright(c) 2009-2015 Bryntum AB
http://bryntum.com/contact
http://bryntum.com/products/siesta/license

*/
Siesta.Test.Browser.meta.extend({
    
    override : {
        
        queueCommand : function (command, callback) {
            if (!this.harness.isAutomated) {
                this.diag(&quot;Command: `&quot; + command.name + &quot;` skipped - not running in automation&quot;)
                
                callback &amp;&amp; callback(false)
                
                return
            }
            
            var me          = this
            var async       = me.beginAsync()
            
            this.harness.queueCommand(command, function (success) {
                callback &amp;&amp; callback(success)
                
                me.endAsync(async)
            })
        },
        
<span id='Siesta-Test-Browser-method-screenshot'>        /**
</span>         * **This feature is available only in Standard package**.
         * 
         * This method will take a screenshot of the currently visible state of the page. Note, that this feature
         * currently only works when running in the webdriver launcher. When running tests in the browser
         * this command will be ignored with diagnostic message. 
         * 
         * Screenshot will not be taken immediately, but after slight delay (while the command will reach the webdriver). 
         * This method is asynchronous, and to continue test execution after screenshot, you need to provide a callback to it.
         * 
         * You can use this method in the chain step, using the method invocation form:
         * 

    t.chain(
        { screenshot : 'mydir/fileName.png' }
    )

         * 
         * 
         * @param {String} fileName The name of the file to save the screenshot to, relative to the current working directory
         * of the launcher script. File will be saved in the PNG format, the &quot;.png&quot; extension will be appended if missing. 
         * You can provide the directory in the file name, it will be created if missing, for example: 
         * `screenshots/grids/checkpoint1.png`
         * @param {Function} callback The callback to call, after the screenshot has been saved to the file.
         * 
         * @method
         * @member Siesta.Test.Browser 
         */
        screenshot : function (fileName, callback) {
            var me          = this
            
            me.fireEvent('beforescreenshot')
            
            me.queueCommand({
                // reserverd props: &quot;name&quot;, &quot;id&quot;
                name            : 'screenshot',
                
                fileName        : fileName
            }, function (success) {
                me.fireEvent('screenshot')
                
                callback &amp;&amp; callback(success)
            })
        }
    }
});
</pre>
</body>
</html>
